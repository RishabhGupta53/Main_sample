  backend_address_pool {
    name = lookup(var.AppGateway["AppGateway_1"], "backend_pool_name")
    
    dynamic "backend_addresses" {
      for_each = merge(
        lookup(var.AppGateway["AppGateway_1"], "backend_pools_ip"),
        lookup(var.AppGateway["AppGateway_1"], "backend_pools_fqdn"),
        lookup(var.AppGateway["AppGateway_1"], "backend_pools_vm"),
        lookup(var.AppGateway["AppGateway_1"], "backend_pools_appservice")
      )
      content {
        ip_address = backend_addresses.value[0]
      }
    }
  }
